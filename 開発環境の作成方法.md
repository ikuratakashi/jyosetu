# 開発環境の作成方法 Windows版

サイトはReactで作成します。

## Reactの開発環境の作成方法

### python のインストール

※pythonのプログラムを動かさなければ必要なし

インストールするpythonのバージョンを確認
```
winget search python.python
```
実行結果
```
名前            ID                 バージョン ソース
-----------------------------------------------------
Python 2        Python.Python.2    2.7.18150  winget
Python 3.0      Python.Python.3.0  3.0.1      winget
Python 3.1      Python.Python.3.1  3.1.4      winget
Python 3.10     Python.Python.3.10 3.10.11    winget
Python 3.11     Python.Python.3.11 3.11.9     winget
Python 3.12     Python.Python.3.12 3.12.6     winget
Python 3.13.0a5 Python.Python.3.13 3.13.0a5   winget
Python 3.2      Python.Python.3.2  3.2.5      winget
Python 3.3      Python.Python.3.3  3.3.5      winget
Python 3.4      Python.Python.3.4  3.4.4      winget
Python 3.5      Python.Python.3.5  3.5.4      winget
Python 3.6      Python.Python.3.6  3.6.8      winget
Python 3.7      Python.Python.3.7  3.7.9      winget
Python 3.8      Python.Python.3.8  3.8.10     winget
Python 3.9      Python.Python.3.9  3.9.13     winget
```

インストールしたいバージョンのIDを使ってインストール

```
winget install --id Python.Python.3.12 
```

※インストール後に再起動が必要


### Git のインストール

```
winget install --id Git.Git -e --source winget
```

※インストール後に再起動が必要

### VSCode のインストール

```
winget install Microsoft.VisualStudioCode
```

### Node.js のインストール

```
winget install -e --id OpenJS.NodeJS
```

※インストール後に再起動が必要

以下のコマンドを実行してインストールされたか確認する。

```
node -v
npm -v
```

バージョンが表示されればOK

## yarnのインストール
パッケージ管理ツールの一つ
npmより速いらしい
```
npm install -g yarn
```

※インストール後に再起動が必要

yarnの確認。バージョンが出れば良い。
```
yarn -v
```

## VSCodeへReactの拡張機能をインストール

### ES7 React/Redux/GraphQL/React-Native snippets
https://marketplace.visualstudio.com/items?itemName=rodrigovallades.es7-react-js-snippets

VSCodeで入力を補完してくれる便利なツール

### npxでアプリのひな型を作成

`npx`は、Node.jsのパッケージマネージャである`npm`に付属するツールで、特定のNode.jsパッケージを簡単に実行するためのコマンドです。

```
npx create-react-app jyosetu-app
```
`jyosetu-app`は任意の名前を設定してください。作成されるフォルダの名前です。

## サイトの起動方法

以下のコマンドを実行すると、ブラウザが起動されてサイトが表示されます。

```
cd jyosetu-app
yarn start
```

## 静的なhtmlを作成する方法

momoを起動した時にサイトを表示させるために、静的なhtmlなどを生成する必要があります。
以下のコマンドで`build`フォルダに生成されます。
```
yarn run build
```
`build` フォルダの内容を `html` にコピーし、momoを起動すると、htmlフォルダ内のファイルを読み込んでサイトが表示できるようになります。


## Reactのコンポーネントのインストール

サイトをcoolに仕上げてくれるコンポーネントをインストールします。

## Matelial UI のインストール

使用するのは、このサイトのもの。

https://mui.com/material-ui/

jyoset-appのフォルダ内に移動して以下のコマンドを実行
- 本体
```
yarn add @mui/material @emotion/react @emotion/styled
```
- icon群
```
yarn add @mui/icons-material
```

削除する場合は、addの部分をremoveに変更してコマンドを実行
```
yarn remove @mui/icons-material
```

## htmlを切り替えるコンポーネントのインストール
Reactでページを切り替えるために必要なコンポーネントをインストール

```
yarn add react-router-dom
```

## ソースをcloneしてきた場合に、サイトを起動するまでの操作

ソースをcloneしただけだと、ソースを実行できません。以下の手順を行ってください。

### Reactのインストール
reactのプロジェクトフォルダで以下のコマンドを実行してください。

※reactのプロジェクトとは？
`jyosetu\react-app` や `jyosetu\jyoset-app` などのフォルダです。

コマンドラインでこれらのフォルダに移動し、以下のコマンドを実行してください。
`package.json` に記載されている依存関係を一括でインストールできます。

```
npm install
```
又は、
```
yarn install
```


### yarn start でエラーが表示された場合の対処方法

`yarn start` を実行した場合に、以下のエラーが表示される事があります。

```
yarn : このシステムではスクリプトの実行が無効になっているため、ファイル C:\Program Files\nodejs\yarn.ps1 を読み込むことができません。詳細については、「about_Execution_Policies」(https://go.microsoft.com/fwlink/?LinkID=135170) を参照してください。
```

解消方法は以下の通りです。（Copilotからの回答）

---
このエラーは、PowerShellの実行ポリシーがスクリプトの実行を許可していないために発生しています。以下の手順で実行ポリシーを変更して、スクリプトの実行を許可することができます：

1. **PowerShellを管理者として実行**:
   - スタートメニューから「PowerShell」を検索し、右クリックして「管理者として実行」を選択します。

2. **実行ポリシーを変更**:
   - 以下のコマンドを実行して、実行ポリシーを`RemoteSigned`に変更します：
     ```powershell
     Set-ExecutionPolicy RemoteSigned
     ```
   - 実行ポリシーを変更する際に、確認メッセージが表示されるので「Y」を入力して続行します。

3. **実行ポリシーの確認**:
   - 実行ポリシーが正しく変更されたか確認するために、以下のコマンドを実行します：
     ```powershell
     Get-ExecutionPolicy
     ```
   - `RemoteSigned`と表示されれば成功です。

これで、`yarn`コマンドが正常に動作するはずです。試してみてください！もし他に問題があれば教えてくださいね。

... Copilotの回答ココまで。

## yarn startが実行できない

以下が表示される場合。
```
$ react-scripts start
'react-scripts' は、内部コマンドまたは外部コマンド、
操作可能なプログラムまたはバッチ ファイルとして認識されていません。
```

以下のコマンドを実行をしてインストール
```
npm install react-scripts
```

## ゲームパッドの接続

ドライバ
```
https://www.elecom.co.jp/products/JC-U4113SBK.html
```

## ラズベリーパイでのインストール

pythonで使用するライブラリのインストール
libフォルダにインストールしているが、VSCodeでsv.pyを実行するとエラーとなる為、以下のライブラリをグローバルインストールする

```
pip install python_dotenv
```
```
pip install watchdog
```
```
pip install RPi.GPIO
```
```
pip install pyusb --target ./lib
```

## シェルへの実行権限を付与

```
chmod 777 ./run_st.sh
chmod 777 ./run_ed.sh
```

```
chmod 777 ./html/momo_st.sh
chmod 777 ./html/momo_ed.sh
```

## Reactのライブラリ

* **マークダウンを表示する**
```
npm install react-markdown remark-gfm
```
* **マークダウンをGitHubの表示に似せる**
```
npm install github-markdown-css
```

## Yarnのライブラリ

* **環境変数の指定をクラスプラットフォームで行う**
```
yarn add cross-env
```

## A/Dコンバータ ADS1115 を扱うライブラリ

* **ライブラリ** 
```
pip3 install adafruit-circuitpython-ads1x15
```
* **依存関係** 
```
pip3 install adafruit-blinka
```

## WebSocketライブラリ

* **ライブラリ** 
```
pip install websockets
```
