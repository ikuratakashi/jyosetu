# コントローラからのボタン押下をブラウザで取得する方法

## Copilotからの回答

はい、USBレシーバーを使用してPCに接続されたワイヤレスコントローラのボタン押下を、Gamepad APIを使用してブラウザで検出することができます。

以下は、基本的な手順です：

1. **コントローラを接続**：USBレシーバーをPCに接続し、コントローラをペアリングします。
2. **Gamepad APIを使用**：JavaScriptを使用してGamepad APIを呼び出し、コントローラのボタン押下を検出します。

以下は、簡単なサンプルコードです：

```javascript
window.addEventListener("gamepadconnected", (event) => {
    console.log("Gamepad connected:", event.gamepad);
    const gamepadIndex = event.gamepad.index;
    requestAnimationFrame(updateStatus);
});

window.addEventListener("gamepaddisconnected", (event) => {
    console.log("Gamepad disconnected:", event.gamepad);
});

function updateStatus() {
    const gamepads = navigator.getGamepads();
    for (let i = 0; i < gamepads.length; i++) {
        const gp = gamepads[i];
        if (gp) {
            for (let j = 0; j < gp.buttons.length; j++) {
                if (gp.buttons[j].pressed) {
                    console.log(`Button ${j} pressed`);
                }
            }
        }
    }
    requestAnimationFrame(updateStatus);
}
```

このコードは、ゲームパッドが接続されたときにイベントをリッスンし、ボタンが押されたときにコンソールにメッセージを表示します²⁴.

試してみて、うまく動作するか確認してみてください。何か問題があれば教えてくださいね！

ソース: Copilot との会話、 2024/8/26
(1) ゲームパッド API を使用したコントロールの実装 - ゲーム開発 | MDN. https://developer.mozilla.org/ja/docs/Games/Techniques/Controls_Gamepad_API.
(2) Gamepad - Web API | MDN. https://developer.mozilla.org/ja/docs/Web/API/Gamepad.
(3) ブラウザの WebHID を p5.js Web Editor上で利用する：デバイス .... https://qiita.com/youtoy/items/90c1c98829f400969657.
(4) 【Gamepad API】Logicoolゲームパッドの操作イベントをJSで .... https://zenn.dev/dami/articles/01cce2ed63be7e.
(5) undefined. https://www.psdevwiki.com/ps4/DS4-USB.